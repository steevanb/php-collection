#!/bin/sh

readonly PROJECT_DIRECTORY=$(realpath $(dirname $(realpath $0))/..)

set -e

if [ $(which docker || false) ]; then
    docker run \
        --rm \
        -v ${PROJECT_DIRECTORY}:/var/php-typed-array:ro \
        -w /var/php-typed-array \
        php:7.3.8-cli-alpine3.10 \
        bin/composerRequireChecker
else
    vendor/bin/composer-require-checker --ansi --config-file=composerRequireChecker.json
fi
