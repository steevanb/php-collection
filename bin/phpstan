#!/usr/bin/env sh

set -eu

readonly projectDir=$(realpath $(dirname $(realpath $0))/..)

if [ $(which docker || false) ]; then
    docker run \
        --rm \
        -v ${projectDir}:/app:ro \
        -w /app \
        php:7.4.11-cli-buster \
        bin/phpstan
else
    ${projectDir}/vendor/bin/phpstan analyse --ansi -c phpstan.neon
fi
