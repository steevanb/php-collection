#!/usr/bin/env sh

set -eu

readonly ROOT_DIR="$(realpath "$(dirname "$(realpath "$0")")/..")"
. "${ROOT_DIR}"/bin/common.inc.sh
BIN_DIR=bin COMPOSER_HOME=/app/var/composer . "${ROOT_DIR}"/bin/dockerise.inc.sh

removeComposerLock() {
    if [ -f "${ROOT_DIR}"/composer.lock ]; then
        rm "${ROOT_DIR}"/composer.lock
    fi
}

removeComposerLock
composer "${@}"
removeComposerLock
